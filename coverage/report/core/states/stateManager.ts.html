<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for core/states/stateManager.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">all files</a> / <a href="index.html">core/states/</a> stateManager.ts
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">18.27% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>19/104</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">4.55% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>1/22</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">11.76% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>2/17</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">19.15% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>18/94</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/// &lt;reference path="./../../reference.d.ts" /&gt;
&nbsp;
namespace <span class="branch-1 cbranch-no" title="branch not covered" >Lightning </span>{
    export class StateManager {
&nbsp;
        protected game:Engine;
        protected _states:Array&lt;iStateMap&gt;;
        protected _activeStates:Array&lt;State&gt;;
&nbsp;
        /**
         * @description StateManager constructor
         * 
         * @param {Engine} game
         */
<span class="fstat-no" title="function not covered" >        constructor(game:Engine)</span> {
<span class="cstat-no" title="statement not covered" >            this.game = game;</span>
<span class="cstat-no" title="statement not covered" >            this._states = [];</span>
<span class="cstat-no" title="statement not covered" >            this._activeStates = [];</span>
        }
&nbsp;
        /**
         * @description Update loop. Called from the game ticker and is used to call each state update function individually
         */
<span class="fstat-no" title="function not covered" >        update(time:number)</span> {
<span class="cstat-no" title="statement not covered" >            for(<span class="cstat-no" title="statement not covered" >let state </span>of this._activeStates) {</span>
<span class="cstat-no" title="statement not covered" >                state.update(time);</span>
            }
        }
&nbsp;
        /**
         * @description Initalize a single state. Usually called from the start function, though this can be bypassed and a custom state injected via this function
         * 
         * @param {State} state
         * @param {Array} params
         * 
         * @returns {boolean}
         */
<span class="fstat-no" title="function not covered" >        init(state:State,</span> <span class="cstat-no" title="statement not covered" >...params)</span>:boolean {
<span class="cstat-no" title="statement not covered" >            state.init(params);</span>
<span class="cstat-no" title="statement not covered" >            this.addToActive(state);</span>
<span class="cstat-no" title="statement not covered" >            return true;</span>
        }
&nbsp;
        /**
         * @description Start a state. This function is called in order to add a state to the world display list and call the init function if the state is to auto initalize
         */
<span class="fstat-no" title="function not covered" >        start(key, <span class="cstat-no" title="statement not covered" >autoInit:boolean = true,</span></span> <span class="cstat-no" title="statement not covered" >...params)</span> {
<span class="cstat-no" title="statement not covered" >            let map = this.findState(key);</span>
<span class="cstat-no" title="statement not covered" >            this.game.world.addChild(map.state);</span>
<span class="cstat-no" title="statement not covered" >            map.worldIndex = this.game.world.getChildIndex(map.state);</span>
<span class="cstat-no" title="statement not covered" >            if(autoInit) {</span>
<span class="cstat-no" title="statement not covered" >                this.init(map.state, params);</span>
            }
        }
&nbsp;
        /**
         * @description Leaves the state renderable and interactive but disables it's update procedure
         *
         * @param {string} key
         * 
         * @returns {boolean}
         */
<span class="fstat-no" title="function not covered" >        pause(key:string)</span>:boolean {
<span class="cstat-no" title="statement not covered" >            let state = this.findState(key).state;</span>
<span class="cstat-no" title="statement not covered" >            this._activeStates.splice(this.findActiveIndex(state));</span>
<span class="cstat-no" title="statement not covered" >            return true;</span>
        }
&nbsp;
        /**
         * @description Re-enabled the state's update procedure
         *
         * @param {string} key
         * 
         * @returns {boolean}
         */
<span class="fstat-no" title="function not covered" >        unpause(key:string)</span>:boolean {
<span class="cstat-no" title="statement not covered" >            let state = this.findState(key).state;</span>
<span class="cstat-no" title="statement not covered" >            this.addToActive(state);</span>
<span class="cstat-no" title="statement not covered" >            return true;</span>
        }
&nbsp;
        /**
         * TODO
         * @description Will reset the state by nullifying it and calling the constructor to re-initalize it
         */
<span class="fstat-no" title="function not covered" >        reset() {</span>
            // let state = this.findState('').state;
            // let newState = state.constructor();
&nbsp;
        }
&nbsp;
        /**
         * @description Will remove the state from the render list and update loop. It will also set all 
         * interactivity to false as well as visibility and renderable.
         * Will store it's current position in the display list incase it is to be re-enabled at the same position
         * 
         * @returns {boolean}
         */
<span class="fstat-no" title="function not covered" >        disable(key:string)</span>:boolean {
<span class="cstat-no" title="statement not covered" >            let map = this.findState(key);</span>
<span class="cstat-no" title="statement not covered" >            let state = map.state;</span>
            
            // store the world index
<span class="cstat-no" title="statement not covered" >            map.worldIndex = this.game.world.getChildIndex(map.state);</span>
&nbsp;
            // disable properties
<span class="cstat-no" title="statement not covered" >            state.interactive = false;</span>
<span class="cstat-no" title="statement not covered" >            state.interactiveChildren = false;</span>
<span class="cstat-no" title="statement not covered" >            state.visible = false;</span>
<span class="cstat-no" title="statement not covered" >            state.renderable = false;</span>
            // remove from the display list
<span class="cstat-no" title="statement not covered" >            this.game.world.removeChild(state);</span>
&nbsp;
            // get index from array and splice
<span class="cstat-no" title="statement not covered" >            this._activeStates.splice(this.findActiveIndex(state));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            return true;</span>
        }
&nbsp;
        /** 
         * @description Will re-enable a state exactly as it was before being disabled. 
         * Sets all visibility, interactivity and renderable to true. 
         * If last index is passed, it will use the previous position in the world display list
         * If the index is passed, it will be added to the world display list where the index is
         * If last index is false and index is null, then it will get added to the top of the world display list
         * 
         * @returns {boolean}
         */
<span class="fstat-no" title="function not covered" >        enable(key:string, <span class="cstat-no" title="statement not covered" >lastIndex:boolean = true,</span> <span class="cstat-no" title="statement not covered" >index:number = null)</span></span>:boolean {
<span class="cstat-no" title="statement not covered" >            let map = this.findState(key);</span>
<span class="cstat-no" title="statement not covered" >            let state:State = map.state;</span>
<span class="cstat-no" title="statement not covered" >            state.visible = true;</span>
<span class="cstat-no" title="statement not covered" >            state.renderable = true;</span>
<span class="cstat-no" title="statement not covered" >            state.interactive = true;</span>
<span class="cstat-no" title="statement not covered" >            state.interactiveChildren = true;</span>
<span class="cstat-no" title="statement not covered" >            if(lastIndex === true) {</span>
<span class="cstat-no" title="statement not covered" >                this.game.world.addChildAt(state, map.worldIndex);</span>
            } else <span class="cstat-no" title="statement not covered" >if (index !== null){</span>
<span class="cstat-no" title="statement not covered" >                this.game.world.addChildAt(state, index);</span>
            } else {
<span class="cstat-no" title="statement not covered" >                this.game.world.addChild(state);</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            return true;</span>
        }
&nbsp;
        /**
         * @description Destroy the state entirley
         * Removes from the world children
         * Removes from the active states array
         * sets visible, renderable and all interactivity to false
         * 
         * @param {string} key
         * 
         * @returns {boolean}
         */
<span class="fstat-no" title="function not covered" >        destroy(key:string)</span>:boolean {
            // get the state
<span class="cstat-no" title="statement not covered" >            let state = this.findState(key).state;</span>
&nbsp;
            // disable properties
<span class="cstat-no" title="statement not covered" >            state.visible = false;</span>
<span class="cstat-no" title="statement not covered" >            state.renderable = false;</span>
<span class="cstat-no" title="statement not covered" >            state.interactive = false;</span>
<span class="cstat-no" title="statement not covered" >            state.interactiveChildren = false;</span>
&nbsp;
            // remove from the game world
<span class="cstat-no" title="statement not covered" >            this.game.world.removeChild(state);</span>
            
            // get index from array and splice
<span class="cstat-no" title="statement not covered" >            this._activeStates.splice(this.findActiveIndex(state));</span>
&nbsp;
            // finally, nullify so GC can free up space
<span class="cstat-no" title="statement not covered" >            state = null;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            return true;</span>
        }
&nbsp;
        /**
         * @description Adds a new state to the state StateManager
         * 
         * @param {string} key
         * @param {State} state
         * 
         * @returns {boolean}
         */
<span class="fstat-no" title="function not covered" >        add(key:string, state:State)</span>:boolean {
<span class="cstat-no" title="statement not covered" >            let newMap:iStateMap = &lt;iStateMap&gt;{};</span>
<span class="cstat-no" title="statement not covered" >            newMap.key = key;</span>
<span class="cstat-no" title="statement not covered" >            newMap.state = state;</span>
<span class="cstat-no" title="statement not covered" >            newMap.active = false;</span>
<span class="cstat-no" title="statement not covered" >            newMap.worldIndex = null;</span>
<span class="cstat-no" title="statement not covered" >            newMap.fps = 60;</span>
<span class="cstat-no" title="statement not covered" >            this._states.push(newMap);</span>
<span class="cstat-no" title="statement not covered" >            return true;</span>
        }
        
        /**
         * @description Adds a state to the active states array if it's not already there
         * 
         * @param {State} state
         * 
         * @returns {boolean}
         */
<span class="fstat-no" title="function not covered" >        private addToActive(state:State)</span>:boolean {
<span class="cstat-no" title="statement not covered" >            let exists:boolean = false</span>
<span class="cstat-no" title="statement not covered" >            for(<span class="cstat-no" title="statement not covered" >let i </span>of this._activeStates) {</span>
<span class="cstat-no" title="statement not covered" >                if(i === state) {</span>
<span class="cstat-no" title="statement not covered" >                    exists = true;</span>
                }
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            if(!exists) {</span>
<span class="cstat-no" title="statement not covered" >                this._activeStates.push(state);</span>
<span class="cstat-no" title="statement not covered" >                return true;</span>
            } else {
<span class="cstat-no" title="statement not covered" >                return false;</span>
            }
        }
&nbsp;
        /**
         * TODO
         * @description Will create a texture of the state as it currently is and apply it to the state as it's only renderable child. This could be used when large state transitions are happening and the display list gets too large and effects performance
         */
<span class="fstat-no" title="function not covered" >        freeze() {</span>
&nbsp;
        }
&nbsp;
        /**
         * @description Loop through the states array and match by key. If one is found, then the entire state map is returned
         * 
         * @param {string} key
         * 
         * @returns {State}
         */
<span class="fstat-no" title="function not covered" >        findState(key:string)</span>:iStateMap {
<span class="cstat-no" title="statement not covered" >            for(<span class="cstat-no" title="statement not covered" >let i </span>of this._states) {</span>
<span class="cstat-no" title="statement not covered" >                if(i.key === key) {</span>
<span class="cstat-no" title="statement not covered" >                    return i;</span>
                }
            }
<span class="cstat-no" title="statement not covered" >            return null;</span>
        }
&nbsp;
        /**
         * @description Loops through all active states and matches by a state
         * 
         * @param {state} 
         * 
         * @returns {number}
         */
<span class="fstat-no" title="function not covered" >        findActiveIndex(state:State)</span>:number {
<span class="cstat-no" title="statement not covered" >            let count:number = 0;</span>
<span class="cstat-no" title="statement not covered" >            for(<span class="cstat-no" title="statement not covered" >let i </span>of this._activeStates) {</span>
<span class="cstat-no" title="statement not covered" >                if(i === state) {</span>
<span class="cstat-no" title="statement not covered" >                    return count;</span>
                }
<span class="cstat-no" title="statement not covered" >                count++;</span>
            }
<span class="cstat-no" title="statement not covered" >            return null;</span>
        }
    }
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Wed Apr 19 2017 22:34:31 GMT+0200 (CEST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
